<!DOCTYPE html>
<html lang="es">

<head>

<meta charset="UTF-8">
<title>Luma Mate</title>

<style>

body{
font-family:Arial;
margin:0;
background:#f5f7f6;
}

header{
background:#1f7a63;
color:white;
padding:20px;
display:flex;
justify-content:space-between;
align-items:center;
}

.logo{
font-size:22px;
font-weight:bold;
}

.cart-btn{
background:white;
color:#1f7a63;
border:none;
padding:10px 15px;
border-radius:8px;
cursor:pointer;
}

.container{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
gap:20px;
padding:30px;
}

.card{
background:white;
border-radius:12px;
box-shadow:0 5px 15px rgba(0,0,0,0.1);
padding:15px;
text-align:center;
}

.card img{
width:100%;
height:180px;
object-fit:cover;
border-radius:10px;
}

button{
background:#1f7a63;
color:white;
border:none;
padding:10px;
border-radius:8px;
cursor:pointer;
margin-top:10px;
}

.cart{
position:fixed;
right:-350px;
top:0;
width:350px;
height:100%;
background:white;
box-shadow:-5px 0 20px rgba(0,0,0,0.2);
padding:20px;
transition:0.3s;
overflow:auto;
}

.cart.open{
right:0;
}

.cart-item{
border-bottom:1px solid #eee;
padding:10px 0;
}

.close{
background:red;
}

</style>

</head>


<body>

<header>

<div class="logo">Luma Mate ðŸ§‰</div>

<button class="cart-btn" onclick="toggleCart()">Carrito (<span id="cartCount">0</span>)</button>

</header>


<div class="container" id="productos"></div>


<div class="cart" id="cart">

<h2>Carrito</h2>

<div id="cartItems"></div>

<br>

<button onclick="comprar()">Comprar por WhatsApp</button>

<br><br>

<button class="close" onclick="toggleCart()">Cerrar</button>

</div>


<script>

let productos = JSON.parse(localStorage.getItem("productos")) || []

let carrito = []


function renderProductos(){

let html=""

productos.forEach((p,i)=>{

html+=`

<div class="card">

<img src="${p.img}">

<h3>${p.nombre}</h3>

<p>$${p.precio}</p>

<p>Stock: ${p.stock}</p>

<button onclick="agregar(${i})">Agregar</button>

</div>

`

})

document.getElementById("productos").innerHTML=html

}


function agregar(i){

if(productos[i].stock<=0){

alert("sin stock")

return

}

carrito.push(productos[i])

productos[i].stock--

localStorage.setItem("productos",JSON.stringify(productos))

renderProductos()

renderCart()

}


function renderCart(){

let html=""

carrito.forEach((p,i)=>{

html+=`

<div class="cart-item">

${p.nombre} - $${p.precio}

<button onclick="eliminar(${i})">X</button>

</div>

`

})

document.getElementById("cartItems").innerHTML=html

document.getElementById("cartCount").innerText=carrito.length

}


function eliminar(i){

carrito.splice(i,1)

renderCart()

}


function toggleCart(){

document.getElementById("cart").classList.toggle("open")

}


function comprar(){

let texto="Pedido:%0A"

carrito.forEach(p=>{

texto+=p.nombre+" - $"+p.precio+"%0A"

})

window.open("https://wa.me/5490000000000?text="+texto)

}


renderProductos()

</script>

</body>
</html>
